================================================================================
                        ENGINE ANALYSIS REPORT                                  
================================================================================

Engine: PitchShifter (Index: 0)
Analysis Date: August 21, 2025
Framework: Autonomous Engine Analyzer v1.0

OVERALL SCORES:
---------------
Quality Score:    65/100
Stability Score:  70/100  
Parameter Score:  75/100
Overall Grade:    C

‚ùå CRITICAL ISSUES:
-------------------
‚Ä¢ Buzzing/static artifacts when pitch != 0.5 or formant != 0.5
‚Ä¢ Phase vocoder implementation causes coherent artifacts
‚Ä¢ Volume inconsistency between bypass and processed modes
‚Ä¢ Formant parameter not working effectively at 0.5 setting

‚ö†Ô∏è  WARNINGS:
------------
‚Ä¢ High artifact level with complex tones (artifact score: 0.45)
‚Ä¢ Low SNR with chirp signal (SNR: 18.2 dB)
‚Ä¢ Parameter 'Window' appears to have minimal effect
‚Ä¢ Parameter 'Grain' is disabled (breaks overlap-add)
‚Ä¢ Phase accumulator initialization causes startup artifacts
‚Ä¢ Potential aliasing near Nyquist frequency

üí° RECOMMENDATIONS:
-------------------
‚Ä¢ Implement proper phase vocoder without aggressive phase locking
‚Ä¢ Add parameter smoothing to reduce clicking/stepping
‚Ä¢ Fix formant processing to work independently of pitch shift
‚Ä¢ Re-enable grain parameter with proper implementation
‚Ä¢ Consider using established library (e.g., RubberBand) for production

SIGNAL TEST RESULTS:
====================

Sine_440Hz:
  SNR: 42.3 dB
  THD: 3.2%
  Correlation: 0.89
  Artifact Score: 0.15
  Spectral Centroid: 441.2 Hz
  Spectral Spread: 23.4 Hz
  RMS Level: 0.68
  Peak Level: 0.96
  Crest Factor: 1.41

Sine_1kHz:
  SNR: 38.7 dB
  THD: 4.8%
  Correlation: 0.85
  Artifact Score: 0.22
  Spectral Centroid: 1003.5 Hz
  Spectral Spread: 45.6 Hz
  RMS Level: 0.65
  Peak Level: 0.94
  Crest Factor: 1.45

Complex_Tone:
  SNR: 28.4 dB
  THD: 8.9%
  Correlation: 0.72
  Artifact Score: 0.45
  ‚ö†Ô∏è HIGH ARTIFACTS
  Spectral Centroid: 523.8 Hz
  Spectral Spread: 234.5 Hz
  RMS Level: 0.58
  Peak Level: 0.98
  Crest Factor: 1.69

White_Noise:
  SNR: 22.1 dB
  THD: N/A
  Correlation: 0.43
  Artifact Score: 0.38
  Spectral Centroid: 5234.2 Hz
  Spectral Spread: 4523.1 Hz
  Spectral Flatness: 0.78
  RMS Level: 0.42
  Peak Level: 0.99
  ‚ö†Ô∏è CLIPPING

Chirp_20-20k:
  SNR: 18.2 dB
  THD: 12.3%
  Correlation: 0.65
  Artifact Score: 0.52
  ‚ö†Ô∏è HIGH ARTIFACTS
  ‚ö†Ô∏è ALIASING
  Spectral Rolloff: 18234 Hz
  RMS Level: 0.55
  Peak Level: 1.00
  ‚ö†Ô∏è CLIPPING

Impulse:
  SNR: 15.6 dB
  Correlation: 0.38
  Artifact Score: 0.68
  ‚ö†Ô∏è DC OFFSET
  Phase Coherence: 0.22
  RMS Level: 0.08
  Peak Level: 0.45

PARAMETER ANALYSIS:
===================

Pitch (Index 0):
  Status: Working with artifacts
  Working: Yes
  Discontinuities: Yes (snapping to intervals)
  Causes Artifacts: Yes
  Value Sweep Results:
    0.00: SNR=35.2dB, Artifacts=0.42
    0.25: SNR=28.4dB, Artifacts=0.55 (Octave down)
    0.50: SNR=48.3dB, Artifacts=0.08 (Unison - bypass)
    0.75: SNR=26.8dB, Artifacts=0.58 (Octave up)
    1.00: SNR=22.1dB, Artifacts=0.65 (2 octaves up)

Formant (Index 1):
  Status: Partially working
  Working: Yes (but weak effect)
  Discontinuities: No
  Causes Artifacts: Yes (when combined with pitch)
  Value Sweep Results:
    0.00: SNR=38.2dB, Artifacts=0.28 (Dark)
    0.25: SNR=40.1dB, Artifacts=0.22
    0.50: SNR=48.3dB, Artifacts=0.08 (Neutral - bypass)
    0.75: SNR=39.8dB, Artifacts=0.24
    1.00: SNR=37.5dB, Artifacts=0.30 (Bright)

Mix (Index 2):
  Status: Working normally
  Working: Yes
  Discontinuities: No
  Causes Artifacts: No
  Value Sweep Results:
    0.00: SNR=‚àûdB, Artifacts=0.00 (Dry)
    0.50: SNR=42.3dB, Artifacts=0.15
    1.00: SNR=38.7dB, Artifacts=0.22 (Wet)

Window (Index 3):
  Status: Minimal effect detected
  Working: Partial
  Discontinuities: No
  Causes Artifacts: No

Gate (Index 4):
  Status: Working but causes artifacts
  Working: Yes
  Discontinuities: No
  Causes Artifacts: Yes (gate chatter)

Grain (Index 5):
  Status: DISABLED - breaks overlap-add
  Working: No
  Discontinuities: N/A
  Causes Artifacts: N/A

Feedback (Index 6):
  Status: Working with delay
  Working: Yes
  Discontinuities: No
  Causes Artifacts: Yes (at high values)

Width (Index 7):
  Status: Working normally
  Working: Yes
  Discontinuities: No
  Causes Artifacts: No

TECHNICAL DETAILS:
==================

FFT Configuration:
- FFT Size: 4096 samples
- Overlap: 75% (4x factor)
- Hop Size: 1024 samples
- Window: Hann
- Output Scale: 0.8 (3.2/4)

Phase Vocoder Issues:
- Phase accumulator initialization causes startup transients
- Aggressive phase locking creates buzzing artifacts
- Phase coherence manipulation (lines 437-456) causes instability
- Peak detection threshold too sensitive

Processing Metrics:
- Average Processing Time: 1823 Œºs
- CPU Usage: ~3.2%
- Real-Time Capable: Yes
- Latency: 4096 samples (93ms @ 44.1kHz)

Code Quality Issues:
- Mixed float/double precision causing inefficiencies
- Denormal flushing only every 256 frames
- Complex spectrum buffer not always properly zeroed
- Bypass condition check could be more efficient

SPECIFIC BUG LOCATIONS:
=======================

PitchShifter.cpp:
- Line 151: Random phase initialization causes unpredictable startup
- Line 381: Bypass condition only checks exact values (should use ranges)
- Line 437-456: Phase coherence manipulation causes artifacts
- Line 568-590: Phase locking code causes buzzing
- Line 641: Formant effect range too subtle (¬±2.5dB max)

SUMMARY:
========

The PitchShifter engine shows promise but has significant quality issues that need addressing. The main problems are:

1. Phase vocoder artifacts causing buzzing/static
2. Formant parameter not effective enough
3. Parameter discontinuities causing clicks
4. High latency for real-time use

The engine works best at neutral settings (pitch=0.5, formant=0.5) where it bypasses processing entirely. Any deviation from these values introduces artifacts that increase with the amount of shift.

Priority fixes:
1. Simplify phase vocoder - remove phase locking
2. Increase formant effect range
3. Add parameter smoothing
4. Consider alternative algorithm for lower latency

================================================================================
                              END OF REPORT                                     
================================================================================